{"ast":null,"code":"var _jsxFileName = \"/Users/yoko/Desktop/YOKOHAMABANK/src/pages/Home/tabelContentsCategory.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport { EditOutlined } from \"@ant-design/icons\";\nimport styles from \"./tabel.module.css\";\nimport firebase from \"../../config/firebase\";\nimport { useGetUid } from \"../../functions/useGetUid\";\nexport default function TabelContentsArea(props) {\n  _s();\n\n  const {\n    0: isEditing,\n    1: setIsEditing\n  } = useState(true);\n  const {\n    0: isHover,\n    1: setIsHover\n  } = useState(false);\n  const {\n    0: getBankID,\n    1: setGetBankID\n  } = useState();\n  const {\n    0: getUserFiledsID,\n    1: setGetUserFiledsID\n  } = useState();\n  const {\n    0: changedCategory,\n    1: setChangedCategory\n  } = useState(props.category);\n  const [functions] = useGetUid();\n  const currentUserId = functions.currentUserId;\n  const ref = firebase.firestore().collection(\"User\");\n  useEffect(() => {\n    ref.onSnapshot(usersDocs => {\n      usersDocs.forEach(contens => {\n        if (contens.data().userID[0].includes(currentUserId)) {\n          const bankID = contens.id;\n          setGetBankID(bankID);\n        }\n      });\n    });\n  }, [currentUserId]); // 自分がアップデートしたい箇所IDを取得する\n\n  useEffect(() => {\n    if (getBankID) {\n      ref.doc(getBankID).collection(\"bank\").onSnapshot(async userDocs => {\n        await userDocs.forEach(userContents => {\n          if (userContents.data().id === props.id) {\n            setGetUserFiledsID(userContents.id);\n          }\n        });\n      });\n    }\n  }, [getBankID]);\n\n  const handleClick = () => {\n    ref.doc(getBankID).collection(\"bank\").doc(getUserFiledsID).update({\n      category: changedCategory\n    });\n    setIsHover(false);\n    setTimeout(() => {\n      setIsEditing(true);\n    }, 1000);\n  };\n\n  return isEditing ? __jsx(React.Fragment, null, __jsx(\"th\", {\n    onMouseEnter: () => setIsHover(true),\n    onMouseLeave: () => setIsHover(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, props.category, isHover && __jsx(EditOutlined, {\n    onClick: () => setIsEditing(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  }))) : __jsx(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, __jsx(\"input\", {\n    required: true,\n    autoFocus: true,\n    onChange: e => setChangedCategory(e.target.value),\n    value: changedCategory,\n    className: styles.styledInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }), __jsx(\"button\", {\n    className: styles.styledButton,\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, \"\\u4FDD\\u5B58\"));\n}\n\n_s(TabelContentsArea, \"ts/tqv4ZV5dVfIC/hTO3xQmkP9g=\", false, function () {\n  return [useGetUid];\n});\n\n_c = TabelContentsArea;\n\nvar _c;\n\n$RefreshReg$(_c, \"TabelContentsArea\");","map":{"version":3,"sources":["/Users/yoko/Desktop/YOKOHAMABANK/src/pages/Home/tabelContentsCategory.tsx"],"names":["React","useState","useEffect","EditOutlined","styles","firebase","useGetUid","TabelContentsArea","props","isEditing","setIsEditing","isHover","setIsHover","getBankID","setGetBankID","getUserFiledsID","setGetUserFiledsID","changedCategory","setChangedCategory","category","functions","currentUserId","ref","firestore","collection","onSnapshot","usersDocs","forEach","contens","data","userID","includes","bankID","id","doc","userDocs","userContents","handleClick","update","setTimeout","e","target","value","styledInput","styledButton"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { EditOutlined } from \"@ant-design/icons\";\nimport styles from \"./tabel.module.css\";\nimport firebase from \"../../config/firebase\";\nimport { useGetUid } from \"../../functions/useGetUid\";\nexport default function TabelContentsArea(props: {\n  category: string;\n  id: string;\n}) {\n  const [isEditing, setIsEditing] = useState<boolean>(true);\n  const [isHover, setIsHover] = useState<boolean>(false);\n  const [getBankID, setGetBankID] = useState<string>();\n  const [getUserFiledsID, setGetUserFiledsID] = useState<string>();\n  const [changedCategory, setChangedCategory] = useState<string>(\n    props.category\n  );\n  const [functions] = useGetUid();\n  const currentUserId = functions.currentUserId;\n  const ref = firebase.firestore().collection(\"User\");\n  useEffect(() => {\n    ref.onSnapshot((usersDocs) => {\n      usersDocs.forEach((contens) => {\n        if (contens.data().userID[0].includes(currentUserId)) {\n          const bankID = contens.id;\n          setGetBankID(bankID);\n        }\n      });\n    });\n  }, [currentUserId]);\n\n  // 自分がアップデートしたい箇所IDを取得する\n  useEffect(() => {\n    if (getBankID) {\n      ref\n        .doc(getBankID)\n        .collection(\"bank\")\n        .onSnapshot(async (userDocs: firebase.firestore.DocumentData) => {\n          await userDocs.forEach(\n            (userContents: firebase.firestore.DocumentData) => {\n              if (userContents.data().id === props.id) {\n                setGetUserFiledsID(userContents.id);\n              }\n            }\n          );\n        });\n    }\n  }, [getBankID]);\n\n  const handleClick = () => {\n    ref\n      .doc(getBankID)\n      .collection(\"bank\")\n      .doc(getUserFiledsID)\n      .update({ category: changedCategory });\n    setIsHover(false);\n    setTimeout(() => {\n      setIsEditing(true);\n    }, 1000);\n  };\n\n  return isEditing ? (\n    <>\n      <th\n        onMouseEnter={() => setIsHover(true)}\n        onMouseLeave={() => setIsHover(false)}\n      >\n        {props.category}\n\n        {isHover && <EditOutlined onClick={() => setIsEditing(false)} />}\n      </th>\n    </>\n  ) : (\n    <th>\n      <input\n        required\n        autoFocus\n        onChange={(e) => setChangedCategory(e.target.value)}\n        value={changedCategory}\n        className={styles.styledInput}\n      />\n      <button className={styles.styledButton} onClick={handleClick}>\n        保存\n      </button>\n    </th>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}